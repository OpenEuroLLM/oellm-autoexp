# @package _global_
# Example Megatron experiment with monitoring and auto-restart
# This config demonstrates using megatron_production monitoring
# with selective restart on transient errors

defaults:
  - base
  - /backend: megatron_torchrun
  - /container: juwels
  - /slurm: juwels
  - /backend/megatron: [llama1_8b_qkln,megatron_fsdp,speed_test_juwels]
  - /sweep: none
  - _self_

job:
  name: megatron_auto_restart_example
  state_events:
  - class_name: StateEvent
    transition: ["RUNNING", "FINISHED"]
    action:
      class_name: RestartAction
